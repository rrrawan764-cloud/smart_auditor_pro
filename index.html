<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>رواق العدل — النظام القانوني الذكي المتكامل</title>

  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    /* دمج المتغيرات والألوان الاحترافية الخاصة بكِ */
    :root {
      --primary: #0a716e; --primary-dark: #054a48; --primary-light: #0fb06b;
      --accent: #FFB703; --bg-1: #021a1a; --bg-2: #042a28;
      --panel: rgba(255, 255, 255, 0.03); --muted: #a8c7b9; --text: #eaffef;
      --radius: 14px; --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      --ui-ease: cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; transition: all 0.3s var(--ui-ease); }
    body { font-family: 'Cairo', sans-serif; background: linear-gradient(160deg, var(--bg-1), var(--bg-2)); color: var(--text); overflow-x: hidden; min-height: 100vh; }

    /* الخلفية التفاعلية (Neural Network) */
    #bgCanvas { position: fixed; inset: 0; z-index: -3; pointer-events: none; }
    .bg-overlay { position: fixed; inset: 0; z-index: -2; pointer-events: none; background: radial-gradient(800px 260px at 8% 12%, rgba(180, 240, 210, 0.05), transparent 8%); }

    .app { max-width: 1440px; margin: 0 auto; padding: 20px; display: grid; grid-template-columns: 320px 1fr; gap: 24px; }
    @media (max-width: 1200px) { .app { grid-template-columns: 1fr; } }

    /* Sidebar */
    .sidebar { background: var(--panel); border-radius: var(--radius); padding: 24px; border: 1px solid rgba(255,255,255,0.05); backdrop-filter: blur(12px); height: calc(100vh - 40px); position: sticky; top: 20px; display: flex; flex-direction: column; }
    .logo { width: 64px; height: 64px; border-radius: 16px; background: linear-gradient(135deg, var(--primary-light), var(--primary)); display: flex; align-items: center; justify-content: center; margin: 0 auto 15px; font-size: 24px; color: white; box-shadow: 0 8px 20px rgba(15, 176, 107, 0.3); }

    .menu button { display: flex; width: 100%; align-items: center; gap: 14px; padding: 14px 16px; border: 0; background: transparent; color: var(--muted); cursor: pointer; font-weight: 600; text-align: right; border-radius: var(--radius); margin-bottom: 8px; }
    .menu button.active { background: rgba(15, 176, 107, 0.1); color: #fff; border-left: 4px solid var(--accent); }

    /* Cards & Panels */
    .card { background: var(--panel); border-radius: var(--radius); padding: 24px; border: 1px solid rgba(255,255,255,0.05); box-shadow: var(--shadow); backdrop-filter: blur(12px); }
    .services-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 16px; margin-top: 20px; }
    .service-item { padding: 20px; text-align: center; background: rgba(255,255,255,0.02); border-radius: var(--radius); border: 1px solid rgba(255,255,255,0.05); cursor: pointer; }
    .service-item:hover { transform: translateY(-5px); background: rgba(15,176,107,0.08); border-color: var(--primary-light); }
    .service-item i { font-size: 28px; color: var(--accent); margin-bottom: 12px; display: block; }

    /* Accessibility Section */
    .access-hub { background: rgba(255, 183, 3, 0.05); border: 1px solid rgba(255, 183, 3, 0.15); padding: 20px; border-radius: var(--radius); margin-top: 24px; }
    .tool-btn { background: rgba(0,0,0,0.3); color: var(--accent); border: 1px solid var(--accent); padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 700; font-size: 13px; margin: 5px; }

    /* AI Inputs */
    textarea { width: 100%; padding: 15px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.08); border-radius: var(--radius); color: #fff; outline: none; min-height: 150px; }
    .btn-primary { background: linear-gradient(135deg, var(--accent), var(--accent-dark)); color: #071018; padding: 14px 24px; border-radius: var(--radius); border: 0; font-weight: 800; cursor: pointer; width: 100%; margin-top: 15px; }
    
    .progress { height: 6px; background: rgba(255,255,255,0.05); border-radius: 10px; margin-top: 15px; overflow: hidden; display: none; }
    .progress i { display: block; height: 100%; background: var(--primary-light); width: 0%; transition: 0.3s; }
    pre.result { white-space: pre-wrap; padding: 20px; background: rgba(0,0,0,0.2); border-radius: 10px; margin-top: 20px; border: 1px solid rgba(255,255,255,0.05); line-height: 1.8; }

    .hidden { display: none; }
  </style>
</head>
<body>
  <canvas id="bgCanvas"></canvas>
  <div class="bg-overlay"></div>

  <div class="app">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo"><i class="fa-solid fa-balance-scale"></i></div>
        <h1>رواق العدل</h1>
        <p class="muted">المنصة الذكية المتكاملة</p>
      </div>
      <nav class="menu">
        <button class="active" data-section="panel-home"><i class="fa-solid fa-house"></i> الرئيسية</button>
        <button data-section="panel-assistant"><i class="fa-solid fa-robot"></i> المساعد الذكي</button>
        <button data-section="panel-filing"><i class="fa-solid fa-file-invoice"></i> قيد دعوى</button>
        <button data-section="panel-judge"><i class="fa-solid fa-gavel"></i> منصة القاضي</button>
      </nav>
      <div style="margin-top: auto; text-align: center" class="muted">روان الصبحي — 2026</div>
    </aside>

    <main class="main">
      <section id="panel-home" class="card">
        <h2>الخدمات الإلكترونية الشاملة</h2>
        <div class="services-grid">
          <div class="service-item" onclick="showSection('panel-filing')"><i class="fa-solid fa-file-pen"></i><h4>قيد دعوى</h4></div>
          <div class="service-item"><i class="fa-solid fa-comments"></i><h4>تبادل مذكرات</h4></div>
          <div class="service-item"><i class="fa-solid fa-video"></i><h4>جلسات رقمية</h4></div>
          <div class="service-item"><i class="fa-solid fa-book-law"></i><h4>المكتبة الرقمية</h4></div>
        </div>

        <div class="access-hub">
          <h3><i class="fa-solid fa-universal-access"></i> ركن الوصول الشامل (ذوي الهمم)</h3>
          <div class="tool-group">
            <button class="tool-btn" onclick="activateTTS()"><i class="fa-solid fa-volume-high"></i> القارئ الصوتي</button>
            <button class="tool-btn" onclick="toggleContrast()"><i class="fa-solid fa-circle-half-stroke"></i> تباين عالي</button>
          </div>
        </div>
      </section>

      <section id="panel-assistant" class="card hidden">
        <h2>المساعد القانوني الذكي</h2>
        <p class="muted mb-2">أدخل ملخص الوقائع لتحليل النواقص القانونية فوراً:</p>
        <textarea id="facts" placeholder="أدخل نص الدعوى أو الوقائع هنا..."></textarea>
        <button class="btn-primary" id="runAiBtn"><i class="fa-solid fa-bolt"></i> تشغيل التحليل العميق</button>
        <div class="progress" id="progressBar"><i></i></div>
        <pre id="analysisResult" class="result">بانتظار الإدخال...</pre>
      </section>

      <section id="panel-filing" class="card hidden">
        <h2>قيد دعوى جديدة</h2>
        <div class="field"><input type="text" placeholder="اسم المدعي"></div>
        <div class="field"><input type="text" placeholder="موضوع الدعوى"></div>
        <div class="field"><textarea placeholder="تفاصيل الدعوى..."></textarea></div>
        <button class="btn-primary" style="background: var(--primary-light)">إرسال الطلب</button>
      </section>
    </main>
  </div>

  <script>
    /* --- 1. محرك الخلفية التفاعلي --- */
    const canvas = document.getElementById('bgCanvas'), ctx = canvas.getContext('2d');
    let particles = [];
    function resize() { canvas.width = innerWidth; canvas.height = innerHeight; }
    window.onresize = resize; resize();

    class Particle {
      constructor() {
        this.x = Math.random() * canvas.width; this.y = Math.random() * canvas.height;
        this.vx = (Math.random() - 0.5) * 0.4; this.vy = (Math.random() - 0.5) * 0.4;
        this.size = Math.random() * 2;
      }
      update() {
        this.x += this.vx; this.y += this.vy;
        if(this.x<0 || this.x>canvas.width) this.vx *= -1;
        if(this.y<0 || this.y>canvas.height) this.vy *= -1;
      }
      draw() {
        ctx.fillStyle = 'rgba(15, 176, 107, 0.2)';
        ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI*2); ctx.fill();
      }
    }
    for(let i=0; i<80; i++) particles.push(new Particle());

    function animate() {
      ctx.clearRect(0,0,canvas.width, canvas.height);
      particles.forEach(p => { p.update(); p.draw(); });
      requestAnimationFrame(animate);
    }
    animate();

    /* --- 2. نظام التنقل والتبديل --- */
    function showSection(id) {
      document.querySelectorAll('main section').forEach(s => s.classList.add('hidden'));
      document.getElementById(id).classList.remove('hidden');
      document.querySelectorAll('.menu button').forEach(b => b.classList.remove('active'));
      const activeBtn = document.querySelector(`[data-section="${id}"]`);
      if(activeBtn) activeBtn.classList.add('active');
    }

    document.querySelectorAll('.menu button').forEach(btn => {
      btn.onclick = () => showSection(btn.dataset.section);
    });

    /* --- 3. ربط الذكاء الاصطناعي API --- */
    document.getElementById('runAiBtn').onclick = async () => {
      const text = document.getElementById('facts').value;
      const resPre = document.getElementById('analysisResult');
      const bar = document.getElementById('progressBar');
      if(!text) return alert("يرجى إدخال النص");

      bar.style.display = 'block';
      document.querySelector('#progressBar i').style.width = '30%';
      resPre.textContent = "جاري التحليل عبر المحرك القانوني...";

      try {
        const response = await fetch('https://smart-auditor-pro.onrender.com/api/ai/analyze', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({ text })
        });
        const data = await response.json();
        document.querySelector('#progressBar i').style.width = '100%';
        
        // تأثير الكتابة التدريجي
        resPre.textContent = "";
        const fullText = `${data.verdict}\n\nتوصيات:\n${data.recommendations.join('\n')}`;
        let i = 0;
        const timer = setInterval(() => {
          resPre.textContent += fullText[i]; i++;
          if(i >= fullText.length) { clearInterval(timer); setTimeout(()=> bar.style.display='none', 1000); }
        }, 15);
      } catch(e) {
        resPre.textContent = "خطأ في الاتصال (وضع المحاكاة): تم رصد نقص في إثباتات التبليغ.";
        bar.style.display = 'none';
      }
    };

    /* --- 4. خدمات ذوي الهمم --- */
    function activateTTS() {
      const text = document.getElementById('analysisResult').textContent;
      const msg = new SpeechSynthesisUtterance(text);
      msg.lang = 'ar-SA'; window.speechSynthesis.speak(msg);
    }
    function toggleContrast() {
      document.body.style.filter = document.body.style.filter ? '' : 'contrast(1.2) brightness(1.1)';
    }
  </script>
</body>
</html>
